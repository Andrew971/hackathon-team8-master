AWSTemplateFormatVersion: '2010-09-09'
Description: Push Notification Service.
Parameters:
  KMSKeyArn:
    Type: String
    Description: Name the bucket used for storing the Pipeline Artifacts.
    MaxLength: 350
    MinLength: 5
  KMSKeyID:
    Type: String
    Description: Name the bucket used for storing the Pipeline Artifacts.
    MaxLength: 350
    MinLength: 5
  ArtifactStoreBucketName:
    Type: String
    Description: Name the bucket used for storing the Pipeline Artifacts.
    MaxLength: 50
    MinLength: 5
  GitHubOwner:
    Type: String
    Description: Name the bucket used for storing the Pipeline Artifacts.
    NoEcho: true
  GitHubToken:
    Type: String
    Description: Name the bucket used for storing the Pipeline Artifacts.
    NoEcho: true
Resources: 

  WebClientPipeline: 
    Type: AWS::CloudFormation::Stack
    Properties: 
      TemplateURL: ./WebClientPipeline/index.yaml
      Parameters: 
        KMSKeyArn: !Ref KMSKeyArn
        KMSKeyID: !Ref KMSKeyID
        ArtifactStoreBucketName: !Ref ArtifactStoreBucketName
        GitHubToken: !Ref GitHubToken
        GitHubOwner: !Ref GitHubOwner
        
  # BackendPipeline: 
  #   Type: AWS::CloudFormation::Stack
  #   Properties: 
  #     TemplateURL: ./CodePipeline/textras-backend-architecture.yaml
  #     Parameters: 
  #       KMSKeyArn: !Ref KMSKeyArn
  #       KMSKeyID: !Ref KMSKeyID
  #       ArtifactStoreBucketName: !Ref ArtifactStoreBucketName
  #       PipelineName: textras-backend-architecture
  #       ProjectName: textras-backend-architecture
  #       PipelineDescription: textras-backend-architecture
  #       PipelineBuildSpecFileName: textras-backend-architecture-buildSpec.yaml
  #       PipelineStackName: textras-backend-architecture-Stack
  #       PathRole: /
  #       PipelineChangeSetName: textras-backend-architecture-changeSet
  #       PipelineOutputFileName: textras-backend-architecture-output.yaml
  #       GitHubRepo: textras-backend-architecture
  #       GitHubOwner: !Ref GitHubOwner
  #       GitHubBranch: master
  #       GitHubToken: !Ref GitHubToken